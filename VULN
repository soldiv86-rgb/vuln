-- State variable to control auto favorite
local autoFavorite = false

-- Function to start auto-favoriting
local function startAutoFavorite()
    autoFavorite = true
    spawn(function()
        while autoFavorite do
            local item = game.Players.LocalPlayer.Backpack:FindFirstChild("Carrot [0.38kg]")
            if item then
                game.ReplicatedStorage.GameEvents.Favorite_Item:FireServer(item)
            end
            wait(0.2)
        end
    end)
end

-- Function to stop auto-favoriting
local function stopAutoFavorite()
    autoFavorite = false
end

-- Function to equip pet dynamically
local function equipPet(petId)
    local player = game.Players.LocalPlayer
    local pet = player.Backpack:FindFirstChild(petId) or player.Character:FindFirstChild(petId)
    
    -- Get pet's CFrame if it exists, otherwise use default
    local petCFrame = pet and pet.PrimaryPart and pet.PrimaryPart.CFrame or CFrame.new()
    
    game.ReplicatedStorage.GameEvents.PetsService:FireServer(
        "EquipPet",
        petId,
        petCFrame
    )
    
    startAutoFavorite()
end

-- Function to unequip pet
local function unequipPet(petId)
    game.ReplicatedStorage.GameEvents.PetsService:FireServer(
        "UnequipPet",
        petId
    )
    
    stopAutoFavorite()
end

-- Example usage
local petId = "{9c8926b2-0362-4019-85e7-905ea7a8433a}"
equipPet(petId)

-- When you want to unequip
unequipPet(petId)
